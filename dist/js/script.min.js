/*! For license information please see script.min.js.LICENSE.txt */
(()=>{"use strict";window.addEventListener("DOMContentLoaded",(()=>{!function(){let e=document.querySelectorAll(".ibg");for(var t=0;t<e.length;t++)e[t].querySelector("img")&&(e[t].style.backgroundImage="url("+e[t].querySelector("img").getAttribute("src")+")")}(),function(e){let t=new Image;t.onload=t.onerror=function(){!function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}();const e=tns({container:".slider__inner",items:1,speed:1e3,slideBy:"page",autoplay:!1,controls:!1,nav:!1,responsive:{}});document.querySelector(".prev").addEventListener("click",(()=>{e.goTo("prev")})),document.querySelector(".next").addEventListener("click",(()=>{e.goTo("next")}));const t=document.querySelector(".catalog__tabs"),o=t.querySelectorAll(".catalog__tab"),s=document.querySelectorAll(".catalog__content");function c(){s.forEach((e=>{e.classList.add("hide"),e.classList.remove("fadeIn")})),o.forEach((e=>{e.classList.remove("catalog__tab_active")}))}function l(e=0){s[e].classList.remove("hide"),s[e].classList.add("fadeIn"),o[e].classList.add("catalog__tab_active")}c(),l(),t.addEventListener("click",(e=>{const t=e.target;t&&t.classList.contains("catalog__tab")&&o.forEach(((e,o)=>{t==e&&(c(),l(o))}))}));const a=document.querySelectorAll(".item-catalog__link_front"),n=document.querySelectorAll(".item-catalog__link_back"),r=document.querySelectorAll(".item-catalog-front"),d=document.querySelectorAll(".item-catalog-back");function i(e){r[e].classList.toggle("item-catalog-front_active"),d[e].classList.toggle("item-catalog-back_active")}a.forEach(((e,t)=>{e.addEventListener("click",(e=>{e.preventDefault(),i(t)}))})),n.forEach(((e,t)=>{e.addEventListener("click",(e=>{e.preventDefault(),i(t)}))}));const u=document.querySelectorAll('[data-modal="consultation"]'),m=document.querySelectorAll('[data-modal="order"'),_=document.querySelector("#consultation"),L=document.querySelector("#order"),f=L.querySelector(".modal__descr"),v=document.querySelector("#thanks"),h=document.querySelectorAll(".modal__close"),g=document.querySelector(".overlay"),y=document.querySelectorAll(".item-catalog__name");function A(){g.classList.remove("hide"),g.classList.add("fadeIn"),_.classList.remove("hide"),_.classList.add("fadeIn"),document.body.style.cssText="overflow: hidden"}function E(){g.classList.add("hide"),g.classList.remove("fadeIn"),_.classList.add("hide"),L.classList.add("hide"),v.classList.add("hide"),document.body.style.cssText="overflow: "}u.forEach((e=>{e.addEventListener("click",(e=>{A()}))})),m.forEach(((e,t)=>{e.addEventListener("click",(e=>{!function(e){g.classList.remove("hide"),g.classList.add("fadeIn"),L.classList.remove("hide"),L.classList.add("fadeIn"),f.textContent=y[e].textContent,document.body.style.cssText="overflow: hidden"}(t)}))})),h.forEach((e=>{e.addEventListener("click",(()=>{E()}))})),document.addEventListener("keydown",(e=>{"Escape"===e.code&&E()})),window.addEventListener("scroll",(function e(){document.documentElement.scrollTop+document.documentElement.clientHeight>=document.documentElement.scrollHeight&&(A(),window.removeEventListener("scroll",e))}));const S=document.querySelector("header"),b=S.querySelector(".header__contacts"),q=b.querySelector(".header__btn"),w=S.querySelector(".header__official"),p=S.querySelector(".header__phone"),k=S.querySelector(".header__body");async function I(e){e.preventDefault();let t=function(e){let t=0,o=e.querySelectorAll("._req");for(let e=0;e<o.length;e++){const s=o[e];x(s),s.classList.contains("email")?C(s)&&(T(s),t++):(B(s)||""===s.value)&&(T(s),t++)}return t}(e.target),o=new FormData(e.target);if(0===t){e.target.classList.add("_sending");let t=await fetch("sendmail.php",{method:"POST",body:o});t.ok?(await t.json(),E(),g.classList.remove("hide"),g.classList.add("fadeIn"),v.classList.remove("hide"),v.classList.add("fadeIn"),document.body.style.cssText="overflow: hidden",e.target.reset(),e.target.classList.remove("_sending")):(alert("Ошибка"),e.target.classList.remove("_sending"))}else alert("Заполните обязательные поля")}function T(e){e.classList.add("_error")}function x(e){e.parentElement.classList.remove("_error"),e.classList.remove("_error")}function C(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}function B(e){return e.value.length<4}window.addEventListener("scroll",(e=>{document.documentElement.scrollTop>="85"?(S.classList.add("header_scroll","fadeIn"),b.classList.add("header__contacts_scroll"),q.classList.add("header__btn_scroll"),w.classList.add("header__official_scroll"),p.classList.add("header__phone_scroll"),k.classList.add("header__body_scroll")):(S.classList.remove("header_scroll","fadeIn"),w.classList.remove("header__official_scroll"),b.classList.remove("header__contacts_scroll"),q.classList.remove("header__btn_scroll"),p.classList.remove("header__phone_scroll"),k.classList.remove("header__body_scroll"))})),document.querySelectorAll("#feed-form").forEach((e=>{e.addEventListener("submit",I)}));const D=document.querySelector(".pageup");window.addEventListener("scroll",(function(){document.documentElement.scrollTop>1e3?(D.classList.remove("hide"),D.classList.add("fadeIn"),D.classList.remove("fadeOut")):(D.classList.remove("fadeIn"),D.classList.add("fadeOut"),D.classList.add("hide"))})),D.addEventListener("click",(function(e){e.preventDefault();let t=this.getAttribute("href").substring(1);console.log(t);const o=document.getElementById(t).getBoundingClientRect().top-0;window.scrollBy({top:o,behavior:"smooth"})}))}))})();